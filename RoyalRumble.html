<script>
  function toRoman(num) {
    var result = '';
    var decimal = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];
    var roman = ["M", "CM","D","CD","C", "XC", "L", "XL", "X","IX","V","IV","I"];
    for (var i = 0;i<=decimal.length;i++) {
      while (num%decimal[i] < num) {
        result += roman[i];
        num -= decimal[i];
      }
    }
    return result;
  }

  function fromRoman(str) {
    var result = 0;
    // the result is now a number, not a string
    var decimal = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];
    var roman = ["M", "CM","D","CD","C", "XC", "L", "XL", "X","IX","V","IV","I"];
    for (var i = 0;i<=decimal.length;i++) {
      while (str.indexOf(roman[i]) === 0){
        result += decimal[i];
        str = str.replace(roman[i],'');
      }
    }
    return result;
  }

  // const input = ['George VI', 'William II', 'Elizabeth I', 'William I'];
  const input = ['Louis IX', 'Louis VIII', 'David II'];

  const inputToNumeral = input.map(name => {

    const tokens = name.split(' ');
    tokens[tokens.length - 1] = fromRoman(tokens[tokens.length - 1]);
    return tokens.join(' ');
  });

  inputToNumeral.sort();

  const result = inputToNumeral.map(name => {
    const tokens = name.split(' ');
    tokens[tokens.length - 1] = toRoman(tokens[tokens.length - 1]);
    return tokens.join(' ');
  });

  console.log(result);
</script>
